{
  "metadata": {
    "annotations": {
      "backstage.io/managed-by-location": "url:https://github.com/Catalin4513/test_backstage/tree/main/composition-example.yaml",
      "backstage.io/managed-by-origin-location": "url:https://github.com/Catalin4513/test_backstage/blob/main/composition-example.yaml",
      "backstage.io/view-url": "https://github.com/Catalin4513/test_backstage/tree/main/composition-example.yaml",
      "backstage.io/edit-url": "https://github.com/Catalin4513/test_backstage/edit/main/composition-example.yaml",
      "backstage.io/source-location": "url:https://github.com/Catalin4513/test_backstage/tree/main/"
    },
    "namespace": "default",
    "name": "my-resource-name",
    "description": "A brief description of the resource",
    "uid": "f0d65327-8a30-489c-9e01-f7acaec4f408",
    "etag": "bd903a880f78da04abd1fa312b5887bcfb65ccec"
  },
  "apiVersion": "backstage.io/v1alpha1",
  "kind": "Resource",
  "spec": {
    "type": "service",
    "owner": "guests",
    "compositeTypeRef": {
      "apiVersion": "example.crossplane.io/v1",
      "kind": "XMultiResource"
    },
    "mode": "Pipeline",
    "pipeline": [
      {
        "step": "patch-and-transform",
        "functionRef": {
          "name": "function-patch-and-transform"
        },
        "input": {
          "apiVersion": "pt.fn.crossplane.io/v1beta1",
          "kind": "Resources",
          "resources": [
            {
              "name": "storage-bucket",
              "base": {
                "apiVersion": "s3.aws.upbound.io/v1beta1",
                "kind": "Bucket"
              },
              "patches": [
                {
                  "type": "FromCompositeFieldPath",
                  "fromFieldPath": "path/to/source12",
                  "toFieldPath": "path/to/target1"
                },
                {
                  "type": "FromCompositeFieldPath",
                  "fromFieldPath": "path/to/source2",
                  "toFieldPath": "path/to/target2"
                }
              ]
            },
            {
              "name": "database-instance",
              "base": {
                "apiVersion": "rds.aws.upbound.io/v1beta1",
                "kind": "DBInstance"
              },
              "patches": [
                {
                  "type": "FromCompositeFieldPath",
                  "fromFieldPath": "spec.dbInstanceClass",
                  "toFieldPath": "spec.forProvider.instanceClass"
                },
                {
                  "type": "FromCompositeFieldPath",
                  "fromFieldPath": "spec.dbEngine",
                  "toFieldPath": "spec.forProvider.engine"
                },
                {
                  "type": "FromCompositeFieldPath",
                  "fromFieldPath": "spec.allocatedStorage",
                  "toFieldPath": "spec.forProvider.allocatedStorage"
                }
              ]
            },
            {
              "name": "network-subnet",
              "base": {
                "apiVersion": "ec2.aws.upbound.io/v1beta1",
                "kind": "Subnet"
              },
              "patches": [
                {
                  "type": "FromCompositeFieldPath",
                  "fromFieldPath": "path/to/source3",
                  "toFieldPath": "path/to/target3"
                }
              ]
            }
          ]
        }
      }
    ]
  }
}
