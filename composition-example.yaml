metadata:
  namespace: default
  annotations:
    backstage.io/managed-by-location: >-
      url:https://github.com/Catalin4513/test_backstage/tree/main/composition-example.yaml
    backstage.io/managed-by-origin-location: >-
      url:https://github.com/Catalin4513/test_backstage/blob/main/composition-example.yaml
    backstage.io/view-url: >-
      https://github.com/Catalin4513/test_backstage/tree/main/composition-example.yaml
    backstage.io/edit-url: >-
      https://github.com/Catalin4513/test_backstage/edit/main/composition-example.yaml
    backstage.io/source-location: url:https://github.com/Catalin4513/test_backstage/tree/main/
  name: my-resource-name
  description: A brief description of the resource
  uid: 9cd12379-7019-4e10-97a8-85e97333526b
  etag: 98c2871078aec7fed2d0ddd8eae0363960711e57
apiVersion: backstage.io/v1alpha1
kind: Resource
spec:
  type: service
  owner: guest
  compositeTypeRef:
    apiVersion: example.crossplane.io/v1
    kind: XMultiResource
  mode: Pipeline
  pipeline:
    - step: patch-and-transform
      functionRef:
        name: function-patch-and-transform
      input:
        apiVersion: pt.fn.crossplane.io/v1beta1
        kind: Resources
        resources:
          - name: storage-bucket
            base:
              apiVersion: s3.aws.upbound.io/v1beta1
              kind: Bucket
            patches:
              - type: FromCompositeFieldPath
                fromFieldPath: path/to/source12
                toFieldPath: path/to/target1
              - type: FromCompositeFieldPath
                fromFieldPath: path/to/source2
                toFieldPath: path/to/target2
          - name: network-subnet
            base:
              apiVersion: ec2.aws.upbound.io/v1beta1
              kind: Subnet
            patches:
              - type: FromCompositeFieldPath
                fromFieldPath: spec.cidrBlock
                toFieldPath: spec.forProvider.cidrBlock
              - type: FromCompositeFieldPath
                fromFieldPath: spec.availabilityZone
                toFieldPath: spec.forProvider.availabilityZone
              - type: FromCompositeFieldPath
                fromFieldPath: spec.vpcId
                toFieldPath: spec.forProvider.vpcId
